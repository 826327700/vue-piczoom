webpackJsonp([1],{NHnr:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("VCXJ"),o={props:{scale:{type:Number,default:2.5},url:{type:String,required:!0},bigUrl:{type:String,default:null},scroll:{type:Boolean,default:!1}},data:function(){return{id:null,cover:null,imgbox:null,imgwrap:null,img:null,canvas:null,ctx:null,rectTimesX:0,rectTimesY:0,imgTimesX:0,imgTimesY:0,init:!1}},created:function(){for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",i=t.length,e="",s=0;s<10;s++)e+=t.charAt(Math.floor(Math.random()*i));this.id=e},mounted:function(){var t=this;this.$nextTick(function(){t.initBox()})},methods:{initBox:function(){var t=this,i=this.$refs[this.id];this.imgbox=i,this.cover=i.querySelector(".mouse-cover"),this.cover.style.width=this.imgbox.offsetWidth/this.scale+"px",this.cover.style.height=this.imgbox.offsetHeight/this.scale+"px",this.cover.style.left="-100%",this.cover.style.top="-100%",this.imgwrap=i.querySelector("img");var e=void 0;e=this.bigUrl?this.bigUrl:this.imgwrap.src,this.img=new Image,this.img.src=e,this.img.onload=function(){t.rectTimesX=t.cover.offsetWidth/t.imgwrap.offsetWidth,t.rectTimesY=t.cover.offsetHeight/t.imgwrap.offsetHeight,t.imgTimesX=t.img.width/t.imgwrap.offsetWidth,t.imgTimesY=t.img.height/t.imgwrap.offsetHeight},this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.className="mouse-cover-canvas",this.canvas.style.position="absolute",this.canvas.style.left=this.imgbox.offsetLeft+this.imgbox.offsetWidth+10+"px",this.canvas.style.top=this.imgbox.offsetTop+"px",this.canvas.style.border="1px solid #eee",this.canvas.style.zIndex="99999",this.canvas.height=this.imgbox.offsetHeight,this.canvas.width=this.imgbox.offsetWidth,this.canvas.style.display="none",document.body.append(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.init=!0},mousemove:function(t){if(!this.init)return!1;var i=this;var e,s=t||event,o={x:(e=s).pageX-i.cover.offsetWidth/2,y:e.pageY-i.cover.offsetHeight/2};if(o.x<=this.imgwrap.offsetLeft+this.imgwrap.offsetWidth-this.cover.offsetWidth&&o.x>=this.imgwrap.offsetLeft&&(this.cover.style.left=o.x+"px"),o.y<=this.imgwrap.offsetTop+this.imgwrap.offsetHeight-this.cover.offsetHeight&&o.y>=this.imgwrap.offsetTop&&(this.cover.style.top=o.y+"px"),o.x<=this.imgwrap.offsetLeft+this.imgwrap.offsetWidth-this.cover.offsetWidth&&o.x>=this.imgwrap.offsetLeft&&o.y<=this.imgwrap.offsetTop+this.imgwrap.offsetHeight-this.cover.offsetHeight&&o.y>=this.imgwrap.offsetTop){this.ctx.clearRect(0,0,this.imgwrap.offsetWidth,this.imgwrap.offsetHeight);var a=this.cover.offsetLeft-this.imgwrap.offsetLeft,r=this.cover.offsetTop-this.imgwrap.offsetTop;this.ctx.drawImage(this.img,a*this.imgTimesX,r*this.imgTimesY,this.img.width*this.rectTimesX,this.img.height*this.rectTimesY,0,0,this.imgbox.offsetWidth,this.imgbox.offsetHeight)}},mouseover:function(t){if(!this.init)return!1;t=t||event,this.scroll||(t.currentTarget.addEventListener("mousewheel",function(t){t.preventDefault()},!1),t.currentTarget.addEventListener("DOMMouseScroll",function(t){t.preventDefault()},!1)),this.cover.style.display="block",this.canvas.style.display="block"},mouseleave:function(){if(!this.init)return!1;this.cover.style.display="none",this.canvas.style.display="none"}}},a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:t.id,staticClass:"magnifier-box",on:{mousemove:t.mousemove,mouseover:t.mouseover,mouseleave:t.mouseleave}},[e("img",{attrs:{src:t.url,alt:""}}),t._v(" "),e("div",{staticClass:"mouse-cover"})])},staticRenderFns:[]};var r={name:"App",components:{PicZoom:e("X4nt")(o,a,!1,function(t){e("ezlr")},"data-v-771c4225",null).exports}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),e("div",{staticClass:"pic-box"},[e("pic-zoom",{attrs:{url:"static/imac2.jpg",scale:3}})],1),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"pic-box"},[e("pic-zoom",{attrs:{url:"static/imac2.jpg",scale:3,scroll:!0}})],1),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"pic-box"},[e("pic-zoom",{attrs:{url:"static/imac2_thumb.jpg","big-url":"static/imac2.jpg",scale:3}})],1)])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("p",[this._v("配置3倍放大："),i("span",{staticStyle:{color:"#ff6600"}},[this._v(':scale="3"')])])},function(){var t=this.$createElement,i=this._self._c||t;return i("p",[this._v("配置放大时可滚动页面(滚轮)："),i("span",{staticStyle:{color:"#ff6600"}},[this._v(':scroll="true"')])])},function(){var t=this.$createElement,i=this._self._c||t;return i("p",[this._v("分开配置大小图片地址："),i("span",{staticStyle:{color:"#ff6600"}},[this._v('url="static/imac2_thumb.jpg" big-url="static/imac2.jpg"')])])}]};var n=e("X4nt")(r,c,!1,function(t){e("n35y")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:n},template:"<App/>"})},ezlr:function(t,i){},n35y:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.2d856aef5c8e8431f6b3.js.map